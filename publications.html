<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Angers Lab | Publications</title>
<meta name="description" content="Peer-reviewed papers, reviews, and preprints from the Angers Lab."/>
<link rel="icon" href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;rect width='100' height='100' fill='%230a0a0a'/&gt;&lt;text x='50' y='58' font-size='60' text-anchor='middle' fill='%23ffffff' font-family='Arial, Helvetica, sans-serif'&gt;A&lt;/text&gt;&lt;/svg&gt;">
<style>
    :root {
      --bg: #0b0c10;
      --panel: #111317;
      --elev: #161a20;
      --text: #e9eef5;
      --muted: #aeb6c2;
      --brand: #59d5ff;
      --brand-2: #7bffb1;
      --link: var(--brand);
      --maxw: 1100px;
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f6f8fb;
        --panel: #ffffff;
        --elev: #f1f4f8;
        --text: #0f172a;
        --muted: #4b5563;
        --brand: #005bff;
        --brand-2: #00ad6b;
        --link: #0b63ff;
      }
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 600px at 80% -50%, rgba(89,213,255,.15), transparent 60%), radial-gradient(900px 500px at -10% 0%, rgba(123,255,177,.12), transparent 55%), var(--bg);
      line-height: 1.55;
    }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .wrap { max-width: var(--maxw); margin-inline: auto; padding-inline: clamp(16px, 3vw, 32px); }
    header { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(140%) blur(8px); background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 30%, transparent), color-mix(in oklab, var(--bg) 55%, transparent)), url('assets/images/banner-wnt.svg') center/cover no-repeat; border-bottom: 1px solid color-mix(in oklab, var(--text) 10%, transparent); }
    .nav { display: flex; align-items: center; justify-content: space-between; height: 64px; }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 700; letter-spacing: .2px; }
    .brand .logo { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); display: grid; place-items: center; color: #001319; font-weight: 900; box-shadow: var(--shadow); }
    .brand small { display: block; font-weight: 600; color: var(--muted); line-height: 1; }
    nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 22px; align-items: center; }
    nav a { color: var(--text); opacity: .95; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,.25); }
    .menu-btn { display: none; background: none; border: none; color: var(--text); font-size: 28px; }
    @media (max-width: 860px) {
      nav ul { display: none; position: absolute; top: 64px; left: 0; right: 0; background: var(--panel); border-bottom: 1px solid color-mix(in oklab, var(--text) 10%, transparent); padding: 12px 18px; flex-direction: column; gap: 8px; }
      nav ul.open { display: flex; }
      .menu-btn { display: block; }
    }
    .hero { padding: clamp(28px, 6vw, 64px) 0 clamp(24px, 5vw, 48px); }
    .hero-grid { display: grid; grid-template-columns: 1.2fr .8fr; gap: clamp(20px, 5vw, 48px); align-items: center; }
    @media (max-width: 980px) { .hero-grid { grid-template-columns: 1fr; } }
    .eyebrow { display: inline-block; padding: 6px 10px; border-radius: 999px; background: color-mix(in oklab, var(--brand) 20%, transparent); color: color-mix(in oklab, var(--brand) 80%, var(--text)); font-weight: 700; letter-spacing: .2px; }
    h1 { font-size: clamp(28px, 4.5vw, 54px); margin: 14px 0 12px; line-height: 1.05; }
    .lead { font-size: clamp(16px, 1.5vw, 20px); color: var(--muted); max-width: 60ch; }
    .sticky-tools { position: sticky; top: 72px; z-index: 10; background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 85%, transparent), transparent); padding-bottom: 8px; }
    .filter-row { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 16px; }
    .input {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 12px; border-radius: 12px;
      border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
      background: var(--panel); color: var(--text); min-width: 260px;
      box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
    }
    .input input { background: transparent; border: none; outline: none; color: inherit; width: 240px; }
    .updated-pill { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: color-mix(in oklab, var(--text) 8%, transparent); color: var(--muted); font-weight:600; border:1px solid color-mix(in oklab, var(--text) 10%, transparent); }
    .year-block { margin: 18px 0 28px; }
    .year-head { display: flex; align-items: baseline; justify-content: space-between; gap: 12px; margin: 6px 0 12px; }
    .year-head h2 { margin: 0; font-size: clamp(22px, 3.2vw, 34px); }
    .year-head small { color: var(--muted); }
    .pubs { display: grid; gap: 12px; }
    .pub { background: var(--panel); border: 1px solid color-mix(in oklab, var(--text) 10%, transparent); border-radius: 14px; padding: 14px; box-shadow: var(--shadow); }
    .pub a { word-break: break-word; }
    .no-results { display:none; color: var(--muted); margin-top: 12px; }
    footer { border-top: 1px solid color-mix(in oklab, var(--text) 10%, transparent); padding: 18px 0 32px; color: var(--muted); }
    .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 24px; }
    .footer-grid a { color: var(--muted); }
    @media (max-width: 820px) { .footer-grid { grid-template-columns: 1fr; } }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
</style>
</head>
<body>
<a class="sr-only" href="#main">Skip to content</a>
<header>
  <div class="wrap nav">
    <a class="brand" aria-label="Angers Lab Home" href="index.html">
      <span class="logo">A</span>
      <span>Angers Lab<br/><small>Cellular Signaling &amp; Regeneration</small></span>
    </a>
    <nav>
      <button aria-label="Open menu" class="menu-btn" onclick="toggleMenu()">â˜°</button>
      <ul id="menu">
        <li><a href="stephane-angers.html">Stephane Angers</a></li>
        <li><a href="research.html">Research</a></li>
        <li><a href="people.html">People</a></li>
        <li><a href="publications.html">Publications</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero" id="top">
  <div class="wrap hero-grid">
    <div>
      <span class="eyebrow">Publications</span>
      <h1>Peerâ€‘reviewed papers &amp; preprints</h1>
      <p class="lead">Browse our lab's work. Use the search box to filter by author, title, journal, or year.</p>
      <div class="filter-row sticky-tools">
        <label class="input" for="pub-filter">ðŸ”Ž <input id="pub-filter" type="search" placeholder="Filter publicationsâ€¦"></label>
        <!-- The build script should replace __UPDATED_AT__ with an ISO 8601 UTC timestamp.
             Alternatively, it can add a comment like:  <!-- BUILD_UTC: 2025-08-22T09:10:00Z --> -->
        <span id="updated" class="updated-pill" data-updated="__UPDATED_AT__">Updated â€”</span>
      </div>
      <p id="no-results" class="no-results">No publications match your filter.</p>
    </div>
  </div>
</section>

<main id="main">
  <div class="wrap">

    <!-- PUBLIST:START -->
    <!-- The build script injects grouped publication markup here -->
    <!-- PUBLIST:END -->

  </div>
</main>

<footer>
  <div class="wrap footer-grid">
    <div>
      <b>Angers Lab</b><br/>
      Cellular Signaling &amp; Regeneration
      <div class="mt-2">Donnelly Centre â€¢ University of Toronto</div>
    </div>
    <div>
      <b>Links</b><br/>
      <a href="https://scholar.google.com/" target="_blank" rel="noopener">Google Scholar</a><br/>
      <a href="https://pubmed.ncbi.nlm.nih.gov/?term=Angers%20S" target="_blank" rel="noopener">PubMed</a>
    </div>
    <div>
      <b>Contact</b><br/>
      <a href="mailto:info@example.com">info@example.com</a>
    </div>
  </div>
</footer>

<script>
function toggleMenu(){ document.getElementById('menu').classList.toggle('open'); }

// --- Live filter ---
const filterInput = document.getElementById('pub-filter');
const noResults = document.getElementById('no-results');
function applyFilter(q){
  q = (q||'').trim().toLowerCase();
  const items = document.querySelectorAll('.pub');
  let shown = 0;
  items.forEach(li => {
    const hay = (li.getAttribute('data-search') || li.textContent).toLowerCase();
    const match = !q || hay.indexOf(q) !== -1;
    li.style.display = match ? '' : 'none';
    if (match) shown++;
  });
  noResults.style.display = shown ? 'none' : '';
}
filterInput && filterInput.addEventListener('input', e => applyFilter(e.target.value));

// --- Updated-at pill population ---
// Priority: 1) HTML comment <!-- BUILD_UTC: ... --> injected by the script
//           2) data-updated attribute (script replaces __UPDATED_AT__ with ISO string)
//           3) leave as "â€”" if neither present
(function(){
  function findBuildUTCFromComments(){
    const walker = document.createTreeWalker(document, NodeFilter.SHOW_COMMENT, null);
    let node;
    while(node = walker.nextNode()){
      const m = String(node.nodeValue || '').match(/BUILD_UTC:\s*([0-9T:\.\-+Z]+)/i);
      if (m) return m[1];
    }
    return null;
  }
  const pill = document.getElementById('updated');
  if (!pill) return;
  let iso = findBuildUTCFromComments();
  if (!iso){
    const v = pill.getAttribute('data-updated');
    if (v && v !== '__UPDATED_AT__') iso = v;
  }
  if (!iso) return; // nothing to show yet
  try {
    const d = new Date(iso);
    if (!isNaN(d)){
      const utc = new Intl.DateTimeFormat('en-CA', { dateStyle:'medium', timeStyle:'short', timeZone:'UTC' }).format(d);
      const toronto = new Intl.DateTimeFormat('en-CA', { dateStyle:'medium', timeStyle:'short', timeZone:'America/Toronto' }).format(d);
      pill.innerHTML = `Updated <time datetime="${d.toISOString()}">${toronto}</time> (<abbr title="Coordinated Universal Time">UTC</abbr> ${utc.split(', ')[1]})`;
      pill.setAttribute('aria-live','polite');
    }
  } catch(e){ /* noop */ }
})();
</script>

</body>
</html>
