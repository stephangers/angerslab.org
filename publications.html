<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Angers Lab | Publications</title>
<meta name="description" content="Peer-reviewed papers, reviews, and preprints from the Angers Lab."/>
<link rel="icon" href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;rect width='100' height='100' fill='%230a0a0a'/&gt;&lt;text x='50' y='58' font-size='60' text-anchor='middle' fill='%23ffffff' font-family='Arial, Helvetica, sans-serif'&gt;A&lt;/text&gt;&lt;/svg&gt;"/>
<style>
  :root {
    --bg: #0b0c10;
    --panel: #111317;
    --elev: #161a20;
    --text: #e9eef5;
    --muted: #aeb6c2;
    --brand: #59d5ff;
    --brand-2: #7bffb1;
    --link: var(--brand);
    --maxw: 1100px;
    --radius: 18px;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  @media (prefers-color-scheme: light) {
    :root {
      --bg: #f6f8fb; --panel: #ffffff; --elev: #f1f4f8; --text: #0f172a; --muted: #4b5563; --brand: #005bff; --brand-2: #00ad6b; --link: #0b63ff;
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--text);background:radial-gradient(1200px 600px at 80% -50%, rgba(89,213,255,.15), transparent 60%), radial-gradient(900px 500px at -10% 0%, rgba(123,255,177,.12), transparent 55%), var(--bg);line-height:1.55}
  a{color:var(--link);text-decoration:none}
  a:hover{text-decoration:underline}
  .wrap{max-width:var(--maxw);margin-inline:auto;padding-inline:clamp(16px,3vw,32px)}
  header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(8px);background:linear-gradient(180deg, color-mix(in oklab, var(--bg) 30%, transparent), color-mix(in oklab, var(--bg) 55%, transparent)), url('assets/images/banner-wnt.svg') center/cover no-repeat;border-bottom:1px solid color-mix(in oklab, var(--text) 10%, transparent)}
  .nav{display:flex;align-items:center;justify-content:space-between;height:64px}
  .brand{display:flex;align-items:center;gap:12px;font-weight:700;letter-spacing:.2px}
  .brand .logo{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg, var(--brand), var(--brand-2));display:grid;place-items:center;color:#001319;font-weight:900;box-shadow:var(--shadow)}
  .brand small{display:block;font-weight:600;color:var(--muted);line-height:1}
  nav ul{list-style:none;margin:0;padding:0;display:flex;gap:22px;align-items:center}
  nav a{color:var(--text);opacity:.95;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.25)}
  .menu-btn{display:none;background:none;border:none;color:var(--text);font-size:28px}
  @media (max-width:860px){nav ul{display:none;position:absolute;top:64px;left:0;right:0;background:var(--panel);border-bottom:1px solid color-mix(in oklab, var(--text) 10%, transparent);padding:12px 18px;flex-direction:column;gap:8px}nav ul.open{display:flex}.menu-btn{display:block}}

  .hero{padding:clamp(28px,6vw,64px) 0 clamp(16px,4vw,32px)}
  .hero-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:clamp(20px,5vw,48px);align-items:center}
  @media (max-width:980px){.hero-grid{grid-template-columns:1fr}}
  .eyebrow{display:inline-block;padding:6px 10px;border-radius:999px;background:color-mix(in oklab, var(--brand) 20%, transparent);color:color-mix(in oklab, var(--brand) 80%, var(--text));font-weight:700;letter-spacing:.2px}
  h1{font-size:clamp(28px,4.5vw,54px);margin:14px 0 12px;line-height:1.05}
  .lead{font-size:clamp(16px,1.5vw,20px);color:var(--muted);max-width:60ch}

  .sticky-tools{position:sticky;top:72px;z-index:10;background:linear-gradient(180deg, color-mix(in oklab, var(--bg) 85%, transparent), transparent);padding:8px 0}
  .filter-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px;align-items:center}
  .input{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid color-mix(in oklab, var(--text) 12%, transparent);background:var(--panel);color:var(--text);min-width:260px;box-shadow:0 1px 0 rgba(255,255,255,.06) inset}
  .input input{background:transparent;border:none;outline:none;color:inherit;width:240px}
  .updated-pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:color-mix(in oklab, var(--text) 8%, transparent);color:var(--muted);font-weight:600;border:1px solid color-mix(in oklab, var(--text) 10%, transparent)}
  .year-chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:color-mix(in oklab, var(--text) 8%, transparent);color:var(--text);font-weight:600;border:1px solid color-mix(in oklab, var(--text) 10%, transparent);cursor:pointer}
  .chip[aria-current="true"]{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#002016;border:none}

  main{scroll-margin-top:84px}
  .years{display:grid;grid-template-columns: 260px 1fr;gap:22px}
  @media (max-width:980px){.years{grid-template-columns:1fr}}

  .side{position:sticky;top:128px;align-self:start;display:flex;gap:8px;flex-wrap:wrap}
  .side a{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:color-mix(in oklab, var(--text) 8%, transparent);color:var(--text);font-weight:600;border:1px solid color-mix(in oklab, var(--text) 10%, transparent)}

  .year-block{margin:16px 0 28px}
  .year-head{display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin:6px 0 12px}
  .year-head h2{margin:0;font-size:clamp(22px,3.2vw,34px)}
  .year-head small{color:var(--muted)}

  .pubs{display:grid;gap:12px}
  .pub{background:var(--panel);border:1px solid color-mix(in oklab, var(--text) 10%, transparent);border-radius:14px;padding:14px;box-shadow:var(--shadow)}
  .pub .meta{color:var(--muted);font-size:.95rem}
  .pub .title{font-weight:700;margin:2px 0 6px}
  .links a{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:10px;border:1px solid color-mix(in oklab, var(--text) 12%, transparent);background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 100%, transparent), color-mix(in oklab, var(--elev) 100%, transparent));text-decoration:none}
  .links a:hover{text-decoration:none}
  .counter{font-weight:800;background:linear-gradient(135deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}
  .no-results{display:none;color:var(--muted);margin-top:12px}
  .back-top{position:fixed;right:18px;bottom:18px;z-index:40}
  .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:12px;border:1px solid color-mix(in oklab, var(--text) 12%, transparent);background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 100%, transparent), color-mix(in oklab, var(--elev) 100%, transparent));color:var(--text);font-weight:700;text-decoration:none;box-shadow:0 1px 0 rgba(255,255,255,.08) inset, var(--shadow)}
  .btn:hover{text-decoration:none}
</style>
</head>
<body>
<a class="sr-only" href="#main">Skip to content</a>
<header>
  <div class="wrap nav">
    <a class="brand" aria-label="Angers Lab Home" href="index.html">
      <span class="logo">A</span>
      <span>Angers Lab<br/><small>Cellular Signaling &amp; Regeneration</small></span>
    </a>
    <nav>
      <button class="menu-btn" aria-label="Open menu" onclick="toggleMenu()">â˜°</button>
      <ul id="menu">
        <li><a href="stephane-angers.html">Stephane Angers</a></li>
        <li><a href="research.html">Research</a></li>
        <li><a href="people.html">People</a></li>
        <li><a href="publications.html">Publications</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero" id="top">
  <div class="wrap hero-grid">
    <div>
      <span class="eyebrow">Publications</span>
      <h1>Peerâ€‘reviewed papers &amp; preprints</h1>
      <p class="lead">Browse our lab's work. Use the search box to filter by author, title, journal, or year.</p>
      <div class="sticky-tools">
        <div class="filter-row">
          <label class="input" for="pub-filter">ðŸ”Ž <input id="pub-filter" type="search" placeholder="Filter publicationsâ€¦"/></label>
          <span class="updated-pill" id="updated-pill">Updated automatically from PubMed: <!-- timestamp injected by script --></span>
        </div>
        <div class="year-chips" id="year-chips" aria-label="Quick year filters"></div>
      </div>
    </div>
  </div>
</section>

<main id="main">
  <div class="wrap years">
    <aside class="side" id="year-side" aria-label="Years"></aside>
    <div>

<!-- PUBLIST:START -->
<!-- The builder will inject <section class="year-block" data-year="YYYY"> blocks here -->
<!-- PUBLIST:END -->

      <p class="no-results" id="no-results">No publications match your search.</p>
      <p class="mt-3"><a class="btn" href="#top">â†‘ Back to top</a></p>
    </div>
  </div>
</main>

<script>
  function toggleMenu(){ document.getElementById('menu').classList.toggle('open'); }

  // Enhance: build year chips/side links; wire up search; hide empty years.
  (function(){
    const q = document.getElementById('pub-filter');
    const chips = document.getElementById('year-chips');
    const side = document.getElementById('year-side');
    const nores = document.getElementById('no-results');

    const yearBlocks = Array.from(document.querySelectorAll('.year-block'));
    const allPubs = Array.from(document.querySelectorAll('.pub'));

    // Populate year chips & side links
    const years = yearBlocks.map(b => b.getAttribute('data-year')).filter(Boolean);
    years.forEach((y, i) => {
      const chip = document.createElement('button');
      chip.className = 'chip';
      chip.textContent = y;
      chip.setAttribute('data-year', y);
      chip.addEventListener('click', () => {
        location.hash = '#y' + y;
        document.getElementById('pub-filter').value = '';
        filter('');
      });
      chips.appendChild(chip);

      const link = document.createElement('a');
      link.href = '#y' + y;
      link.textContent = y;
      side.appendChild(link);
    });

    // Add anchor ids to each year block
    yearBlocks.forEach(b => {
      const y = b.getAttribute('data-year');
      b.id = 'y' + y;
      // add count element
      const h2 = b.querySelector('h2.year');
      if (h2) {
        const small = document.createElement('small');
        small.className = 'count';
        small.textContent = '';
        const head = b.querySelector('.year-head') || (function(){
          const wrap = document.createElement('div');
          wrap.className = 'year-head';
          b.insertBefore(wrap, b.firstChild);
          wrap.appendChild(h2);
          return wrap;
        })();
        head.appendChild(small);
      }
    });

    function filter(text){
      const t = (text||'').trim().toLowerCase();
      let visibleTotal = 0;
      // Toggle pubs
      allPubs.forEach(li => {
        const hay = (li.getAttribute('data-search')||'').toLowerCase();
        const hit = !t || hay.includes(t);
        li.style.display = hit ? '' : 'none';
        if (hit) visibleTotal++;
      });
      // Update year counts and hide empty sections
      yearBlocks.forEach(sec => {
        const items = Array.from(sec.querySelectorAll('.pub'));
        const shown = items.filter(el => el.style.display !== 'none').length;
        const small = sec.querySelector('.count');
        if (small) small.innerHTML = shown ? `<span class="counter">${shown}</span>` : '';
        sec.style.display = shown ? '' : 'none';
      });
      // No results message
      nores.style.display = visibleTotal ? 'none' : '';
      // Highlight active chip if filtering by a pure year number
      Array.from(chips.children).forEach(c => c.removeAttribute('aria-current'));
      if (/^\d{4}$/.test(t)){
        const active = chips.querySelector(`[data-year="${t}"]`);
        if (active) active.setAttribute('aria-current','true');
      }
    }

    q && q.addEventListener('input', (e)=> filter(e.target.value));
    filter(q ? q.value : '');

    // If URL has #yYYYY, scroll into view (native) and clear filter
    if (location.hash && /^#y\d{4}$/.test(location.hash)){
      const y = location.hash.slice(2);
      const inp = document.getElementById('pub-filter');
      if (inp){ inp.value=''; filter(''); }
      const active = chips.querySelector(`[data-year="${y}"]`);
      if (active) active.setAttribute('aria-current','true');
    }
  })();
</script>

</body>
</html>
